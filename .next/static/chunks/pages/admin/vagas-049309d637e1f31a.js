(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[586],{3586:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>c});var t=s(7876),l=s(4232),r=s(9099),i=s(7328),n=s.n(i),d=s(6297);function c(){let e=(0,r.useRouter)(),[a,s]=(0,l.useState)(!1),[i,c]=(0,l.useState)(!0),[o,x]=(0,l.useState)([]),[m,h]=(0,l.useState)([]),[g,u]=(0,l.useState)(""),[p,b]=(0,l.useState)(""),[j,v]=(0,l.useState)(null),[f,N]=(0,l.useState)(null);(0,l.useEffect)(()=>{localStorage.getItem("admin_token")?(s(!0),y()):e.push("/admin/login"),c(!1)},[]),(0,l.useEffect)(()=>{let e=o;g&&(e=e.filter(e=>{var a,s,t,l;return(null==(a=e.title)?void 0:a.toLowerCase().includes(g.toLowerCase()))||(null==(s=(null==(t=e.company)?void 0:t.name)||e.company)?void 0:s.toLowerCase().includes(g.toLowerCase()))||(null==(l=e.location)?void 0:l.toLowerCase().includes(g.toLowerCase()))})),p&&(e=e.filter(e=>e.category===p)),h(e)},[o,g,p]);let y=async()=>{try{c(!0),N(null),console.log("\uD83D\uDD04 Carregando vagas...");let e=await fetch("/api/all-jobs-combined",{method:"GET",headers:{"Cache-Control":"no-cache"}});if(!e.ok)throw Error("Erro HTTP! status: ".concat(e.status));let a=await e.json();console.log("\uD83D\uDCCA Dados recebidos:",a),a.success&&a.jobs&&Array.isArray(a.jobs)?(x(a.jobs),h(a.jobs),v(new Date().toLocaleString("pt-BR")),console.log("✅ ".concat(a.jobs.length," vagas carregadas"))):(console.error("❌ Formato de dados inv\xe1lido:",a),N("Formato de dados inv\xe1lido recebido da API"),x([]),h([]))}catch(e){console.error("❌ Erro ao carregar vagas:",e),N(e.message),x([]),h([])}finally{c(!1)}},w=Array.from(new Set(o.map(e=>e.category))).filter(Boolean);return(0,t.jsxs)(d.A,{title:"Administra\xe7\xe3o de Vagas",children:[(0,t.jsx)(n(),{children:(0,t.jsx)("title",{children:"Administra\xe7\xe3o de Vagas - Site do Trabalhador"})}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Gerenciar Vagas"}),(0,t.jsxs)("p",{className:"text-gray-600 mt-1",children:[m.length," de ",o.length," vagas encontradas"]})]}),(0,t.jsx)("button",{onClick:y,disabled:i,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white px-4 py-2 rounded-lg font-medium transition-colors",children:i?"\uD83D\uDD04 Carregando...":"\uD83D\uDD04 Atualizar"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,t.jsxs)("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:o.length}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Total de Vagas"})]}),(0,t.jsxs)("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-green-600",children:o.filter(e=>!e.expired).length}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Vagas Ativas"})]}),(0,t.jsxs)("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:w.length}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Categorias"})]}),(0,t.jsxs)("div",{className:"text-center p-4 bg-orange-50 rounded-lg",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:new Set(o.map(e=>{var a;return null==(a=e.location)?void 0:a.split(",")[0]})).size}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Cidades"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Buscar vagas"}),(0,t.jsx)("input",{type:"text",value:g,onChange:e=>u(e.target.value),placeholder:"Digite o t\xedtulo, empresa ou cidade...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filtrar por categoria"}),(0,t.jsxs)("select",{value:p,onChange:e=>b(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,t.jsx)("option",{value:"",children:"Todas as categorias"}),w.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]})]})]}),f&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("div",{className:"text-red-400 mr-3",children:"❌"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Erro ao carregar vagas"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-red-700",children:f})]})]})}),i&&(0,t.jsx)("div",{className:"text-center py-12",children:(0,t.jsxs)("div",{className:"inline-flex items-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mr-3"}),(0,t.jsx)("span",{className:"text-lg text-gray-600",children:"Carregando vagas..."})]})}),!i&&m.length>0&&(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:[(0,t.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:[(0,t.jsxs)("h3",{className:"text-lg font-medium text-gray-900",children:["Lista de Vagas (",m.length,")"]}),j&&(0,t.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["\xdaltima atualiza\xe7\xe3o: ",j]})]}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vaga"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Empresa"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Localiza\xe7\xe3o"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Categoria"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sal\xe1rio"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:m.slice(0,50).map((e,a)=>{var s;return(0,t.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.title}),(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:["ID: ",e.id]})]})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("div",{className:"text-sm text-gray-900",children:(null==(s=e.company)?void 0:s.name)||e.company||"N/A"})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("div",{className:"text-sm text-gray-900",children:e.location})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:e.category})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("div",{className:"text-sm text-gray-900",children:e.salary||"A combinar"})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(e.isExternal?"bg-orange-100 text-orange-800":"bg-green-100 text-green-800"),children:e.isExternal?"Externa":"Interna"})})]},e.id||a)})})]})}),m.length>50&&(0,t.jsx)("div",{className:"px-6 py-4 border-t border-gray-200 text-center bg-gray-50",children:(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:["Mostrando primeiras 50 vagas de ",m.length," total"]})})]}),!i&&0===m.length&&!f&&(0,t.jsxs)("div",{className:"text-center py-12 bg-white rounded-lg shadow-sm border",children:[(0,t.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDCBC"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:g||p?"Nenhuma vaga encontrada":"Nenhuma vaga dispon\xedvel"}),(0,t.jsx)("p",{className:"text-gray-500 mb-4",children:g||p?"Tente ajustar os filtros de busca":'Clique em "Atualizar" para carregar as vagas dispon\xedveis'}),(g||p)&&(0,t.jsx)("button",{onClick:()=>{u(""),b("")},className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Limpar filtros"})]})]})]})}},6297:(e,a,s)=>{"use strict";s.d(a,{A:()=>o});var t=s(7876),l=s(4232),r=s(9099),i=s(7328),n=s.n(i),d=s(8230),c=s.n(d);let o=e=>{let{children:a,title:s="Painel Administrativo"}=e,i=(0,r.useRouter)(),[d,o]=(0,l.useState)(null),[x,m]=(0,l.useState)(!0);(0,l.useEffect)(()=>{setTimeout(()=>{let e=localStorage.getItem("admin_token"),a=localStorage.getItem("admin_user");if(!e||"admin_authenticated"!==e)return void i.push("/admin/login");if(a)try{let e=JSON.parse(a);e.authenticated?(o(e),m(!1)):i.push("/admin/login")}catch(e){i.push("/admin/login")}else i.push("/admin/login")},100)},[i]);let h=[{icon:"\uD83D\uDCCA",label:"Dashboard",href:"/admin",active:"/admin"===i.pathname},{icon:"\uD83D\uDCBC",label:"Vagas",href:"/admin/vagas",active:i.pathname.startsWith("/admin/vagas")},{icon:"\uD83D\uDCCB",label:"Analytics Vagas",href:"/admin/vagas/analytics",active:"/admin/vagas/analytics"===i.pathname},{icon:"\uD83D\uDC65",label:"Leads",href:"/admin/leads",active:"/admin/leads"===i.pathname},{icon:"\uD83C\uDFE2",label:"Empresas",href:"/admin/empresas",active:"/admin/empresas"===i.pathname},{icon:"\uD83D\uDC64",label:"Usu\xe1rios",href:"/admin/usuarios",active:"/admin/usuarios"===i.pathname},{icon:"✏️",label:"Editor de Conte\xfado",href:"/admin/conteudo",active:i.pathname.startsWith("/admin/conteudo")},{icon:"⚙️",label:"Configura\xe7\xf5es",href:"/admin/configuracoes",active:"/admin/configuracoes"===i.pathname}];return x?(0,t.jsx)("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Carregando painel..."})]})}):(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50 flex",children:[(0,t.jsx)(n(),{children:(0,t.jsxs)("title",{children:[s," - Site do Trabalhador"]})}),(0,t.jsxs)("div",{className:"w-64 bg-white shadow-lg flex flex-col",children:[(0,t.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center p-1",children:(0,t.jsx)("img",{src:"/site do trabalhador.png",alt:"Site do Trabalhador",className:"w-full h-full object-contain"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-lg font-bold text-gray-900",children:"Admin Panel"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Painel Administrativo"})]})]})}),(0,t.jsx)("nav",{className:"flex-1 p-4 space-y-2",children:h.map((e,a)=>(0,t.jsxs)(c(),{href:e.href,className:"flex items-center space-x-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors ".concat(e.active?"bg-blue-50 text-blue-700 border-r-2 border-blue-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[(0,t.jsx)("span",{className:"text-lg",children:e.icon}),(0,t.jsx)("span",{children:e.label}),e.active&&(0,t.jsx)("span",{className:"ml-auto text-blue-600",children:"→"})]},a))}),(0,t.jsxs)("div",{className:"p-4 border-t border-gray-200",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-gray-600 text-sm",children:"\uD83D\uDC64"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900",children:(null==d?void 0:d.name)||"Admin"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:(null==d?void 0:d.email)||"admin@admin.com"})]})]}),(0,t.jsx)("button",{onClick:()=>{localStorage.removeItem("admin_token"),localStorage.removeItem("admin_user"),i.push("/admin/login")},className:"w-full text-left text-sm text-gray-600 hover:text-red-600 transition-colors",children:"\uD83D\uDEAA Sair"})]})]}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,t.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200 px-6 py-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:s}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Bem-vindo ao painel de controle do Site do Trabalhador"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)("button",{className:"p-2 text-gray-400 hover:text-gray-600",children:"\uD83D\uDD14"}),(0,t.jsx)(c(),{href:"/",className:"text-sm text-blue-600 hover:text-blue-800",children:"Ver Site →"})]})]})}),(0,t.jsx)("main",{className:"flex-1 p-6",children:a})]})]})}},7339:(e,a,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/vagas",function(){return s(3586)}])}},e=>{var a=a=>e(e.s=a);e.O(0,[636,593,792],()=>a(7339)),_N_E=e.O()}]);