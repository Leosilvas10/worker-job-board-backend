(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[338],{4575:(e,a,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/landing-pages",function(){return s(8902)}])},6297:(e,a,s)=>{"use strict";s.d(a,{A:()=>x});var t=s(7876),l=s(4232),i=s(9099),n=s(7328),r=s.n(n),d=s(8230),c=s.n(d);let x=e=>{let{children:a,title:s="Painel Administrativo"}=e,n=(0,i.useRouter)(),[d,x]=(0,l.useState)(null),[o,m]=(0,l.useState)(!0);(0,l.useEffect)(()=>{setTimeout(()=>{let e=localStorage.getItem("admin_token"),a=localStorage.getItem("admin_user");if(!e||"admin_authenticated"!==e)return void n.push("/admin/login");if(a)try{let e=JSON.parse(a);e.authenticated?(x(e),m(!1)):n.push("/admin/login")}catch(e){n.push("/admin/login")}else n.push("/admin/login")},100)},[n]);let h=[{icon:"\uD83D\uDCCA",label:"Dashboard",href:"/admin",active:"/admin"===n.pathname},{icon:"\uD83D\uDCBC",label:"Vagas",href:"/admin/vagas",active:n.pathname.startsWith("/admin/vagas")},{icon:"\uD83D\uDCCB",label:"Analytics Vagas",href:"/admin/vagas/analytics",active:"/admin/vagas/analytics"===n.pathname},{icon:"\uD83D\uDC65",label:"Leads",href:"/admin/leads",active:"/admin/leads"===n.pathname},{icon:"\uD83C\uDFE2",label:"Empresas",href:"/admin/empresas",active:"/admin/empresas"===n.pathname},{icon:"\uD83D\uDC64",label:"Usu\xe1rios",href:"/admin/usuarios",active:"/admin/usuarios"===n.pathname},{icon:"✏️",label:"Editor de Conte\xfado",href:"/admin/conteudo",active:n.pathname.startsWith("/admin/conteudo")},{icon:"⚙️",label:"Configura\xe7\xf5es",href:"/admin/configuracoes",active:"/admin/configuracoes"===n.pathname}];return o?(0,t.jsx)("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Carregando painel..."})]})}):(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50 flex",children:[(0,t.jsx)(r(),{children:(0,t.jsxs)("title",{children:[s," - Site do Trabalhador"]})}),(0,t.jsxs)("div",{className:"w-64 bg-white shadow-lg flex flex-col",children:[(0,t.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center p-1",children:(0,t.jsx)("img",{src:"/site do trabalhador.png",alt:"Site do Trabalhador",className:"w-full h-full object-contain"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-lg font-bold text-gray-900",children:"Admin Panel"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Painel Administrativo"})]})]})}),(0,t.jsx)("nav",{className:"flex-1 p-4 space-y-2",children:h.map((e,a)=>(0,t.jsxs)(c(),{href:e.href,className:"flex items-center space-x-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors ".concat(e.active?"bg-blue-50 text-blue-700 border-r-2 border-blue-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[(0,t.jsx)("span",{className:"text-lg",children:e.icon}),(0,t.jsx)("span",{children:e.label}),e.active&&(0,t.jsx)("span",{className:"ml-auto text-blue-600",children:"→"})]},a))}),(0,t.jsxs)("div",{className:"p-4 border-t border-gray-200",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-gray-600 text-sm",children:"\uD83D\uDC64"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900",children:(null==d?void 0:d.name)||"Admin"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:(null==d?void 0:d.email)||"admin@admin.com"})]})]}),(0,t.jsx)("button",{onClick:()=>{localStorage.removeItem("admin_token"),localStorage.removeItem("admin_user"),n.push("/admin/login")},className:"w-full text-left text-sm text-gray-600 hover:text-red-600 transition-colors",children:"\uD83D\uDEAA Sair"})]})]}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,t.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200 px-6 py-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:s}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Bem-vindo ao painel de controle do Site do Trabalhador"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)("button",{className:"p-2 text-gray-400 hover:text-gray-600",children:"\uD83D\uDD14"}),(0,t.jsx)(c(),{href:"/",className:"text-sm text-blue-600 hover:text-blue-800",children:"Ver Site →"})]})]})}),(0,t.jsx)("main",{className:"flex-1 p-6",children:a})]})]})}},8902:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>x});var t=s(7876),l=s(4232),i=s(7328),n=s.n(i),r=s(8230),d=s.n(r),c=s(6297);function x(){let[e,a]=(0,l.useState)([]),[s,i]=(0,l.useState)([]),[r,x]=(0,l.useState)(!0),[o,m]=(0,l.useState)({});(0,l.useEffect)(()=>{h()},[]);let h=async()=>{try{let[e,s]=await Promise.all([fetch("/api/landing-pages"),fetch("/api/landing-leads")]),t=await e.json(),l=await s.json();t.success&&a(t.data),l.success&&i(l.data);let n={};t.success&&t.data.forEach(e=>{let a=l.success?l.data.filter(a=>a.landingSlug===e.slug):[];n[e.slug]={totalLeads:a.length,leadsHoje:a.filter(e=>{let a=new Date().toDateString(),s=new Date(e.criadoEm).toDateString();return a===s}).length,ultimoLead:a.length>0?a[a.length-1].criadoEm:null}}),m(n)}catch(e){console.error("Erro ao buscar dados:",e)}finally{x(!1)}},g=async e=>{if(confirm("Tem certeza que deseja deletar esta landing page?"))try{(await fetch("/api/landing-pages?id=".concat(e),{method:"DELETE"})).ok&&h()}catch(e){console.error("Erro ao deletar:",e)}};return r?(0,t.jsx)(c.A,{children:(0,t.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,t.jsx)("div",{className:"text-lg",children:"Carregando..."})})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n(),{children:(0,t.jsx)("title",{children:"Landing Pages - Admin"})}),(0,t.jsx)(c.A,{children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"bg-white shadow rounded-lg",children:(0,t.jsx)("div",{className:"px-6 py-4",children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Landing Pages"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Gerencie suas landing pages e acompanhe os leads"})]}),(0,t.jsx)(d(),{href:"/admin/landing-pages/nova",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Nova Landing Page"})]})})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:e.length}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Landing Pages"})]}),(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-green-600",children:s.length}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Total de Leads"})]}),(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:s.filter(e=>new Date().toDateString()===new Date(e.criadoEm).toDateString()).length}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Leads Hoje"})]}),(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:s.filter(e=>{let a=new Date;return a.setDate(a.getDate()-7),new Date(e.criadoEm)>=a}).length}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Leads 7 dias"})]})]}),(0,t.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[(0,t.jsx)("div",{className:"px-6 py-4 border-b",children:(0,t.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Suas Landing Pages"})}),(0,t.jsx)("div",{className:"divide-y divide-gray-200",children:e.map(e=>{var a,s,l;return(0,t.jsx)("div",{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:e.titulo}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:["/",e.slug]}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.subtitulo})]}),(0,t.jsx)("div",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(e.ativo?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.ativo?"Ativa":"Inativa"})]}),(0,t.jsxs)("div",{className:"mt-4 grid grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"text-center p-3 bg-gray-50 rounded",children:[(0,t.jsx)("div",{className:"text-lg font-bold text-blue-600",children:(null==(a=o[e.slug])?void 0:a.totalLeads)||0}),(0,t.jsx)("div",{className:"text-xs text-gray-600",children:"Total Leads"})]}),(0,t.jsxs)("div",{className:"text-center p-3 bg-gray-50 rounded",children:[(0,t.jsx)("div",{className:"text-lg font-bold text-green-600",children:(null==(s=o[e.slug])?void 0:s.leadsHoje)||0}),(0,t.jsx)("div",{className:"text-xs text-gray-600",children:"Hoje"})]}),(0,t.jsxs)("div",{className:"text-center p-3 bg-gray-50 rounded",children:[(0,t.jsx)("div",{className:"text-xs text-gray-600",children:"\xdaltimo Lead"}),(0,t.jsx)("div",{className:"text-sm font-medium",children:(null==(l=o[e.slug])?void 0:l.ultimoLead)?new Date(o[e.slug].ultimoLead).toLocaleDateString():"Nenhum"})]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col space-y-2 ml-6",children:[(0,t.jsx)("a",{href:"/".concat(e.slug),target:"_blank",rel:"noopener noreferrer",className:"bg-green-600 text-white px-4 py-2 rounded text-sm hover:bg-green-700 transition-colors text-center",children:"Ver P\xe1gina"}),(0,t.jsx)(d(),{href:"/admin/landing-pages/editar/".concat(e.id),className:"bg-blue-600 text-white px-4 py-2 rounded text-sm hover:bg-blue-700 transition-colors text-center",children:"Editar"}),(0,t.jsx)(d(),{href:"/admin/landing-pages/leads/".concat(e.slug),className:"bg-purple-600 text-white px-4 py-2 rounded text-sm hover:bg-purple-700 transition-colors text-center",children:"Ver Leads"}),(0,t.jsx)("button",{onClick:()=>g(e.id),className:"bg-red-600 text-white px-4 py-2 rounded text-sm hover:bg-red-700 transition-colors",children:"Deletar"})]})]})},e.id)})})]}),s.length>0&&(0,t.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[(0,t.jsx)("div",{className:"px-6 py-4 border-b",children:(0,t.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"\xdaltimos Leads (10 mais recentes)"})}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nome"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Telefone"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"E-mail"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Landing"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data"})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:s.sort((e,a)=>new Date(a.criadoEm)-new Date(e.criadoEm)).slice(0,10).map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.nome}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.telefone}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.email}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:e.landingSlug})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.criadoEm).toLocaleDateString("pt-BR")})]},e.id))})]})})]})]})})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[636,593,792],()=>a(4575)),_N_E=e.O()}]);