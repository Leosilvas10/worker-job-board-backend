"use strict";(()=>{var e={};e.id=618,e.ids=[618],e.modules={3480:(e,a,o)=>{e.exports=o(5600)},5338:(e,a,o)=>{o.r(a),o.d(a,{config:()=>c,default:()=>d,routeModule:()=>l});var t={};o.r(t),o.d(t,{default:()=>n});var r=o(3480),s=o(8667),i=o(6435);async function n(e,a){if("POST"!==e.method)return a.status(405).json({success:!1,message:"M\xe9todo n\xe3o permitido"});try{let o;console.log("\uD83C\uDFAF PESQUISA TRABALHISTA COMPLETA - Dados recebidos:",e.body);let{nomeCompleto:t,email:r,whatsapp:s,idade:i,cidade:n,estado:d,nomeUltimaEmpresa:c,nome_ultima_empresa:l,tipoCarteira:u,tipo_carteira:m,recebeuTudoCertinho:p,recebeu_tudo_certinho:f,situacoesEnfrentadas:P,situacoes_enfrentadas:g,aceitaConsultoria:b,aceita_consultoria:A,recebeuFgts:S,recebeuFerias:_,recebeuDecimoTerceiro:h,sofreu_assedio:E,trabalhouSemRegistro:v,mensagem:O,vaga:N,fonte:I,timestamp:y}=e.body,T={nome:t,telefone:s,email:r||"N\xe3o informado",idade:i||18,cidade:n||"",estado:d||"",nome_ultima_empresa:c||l||"N\xe3o informado",tipo_carteira:u||m||"N\xe3o informado",recebeu_tudo_certinho:p||f||"N\xe3o informado",situacoes_enfrentadas:P||g||"N\xe3o informado",aceita_consultoria:b||A||"N\xe3o informado",fgts:S||"N\xe3o informado",ferias:_||"N\xe3o informado",decimo_terceiro:h||"N\xe3o informado",assedio:E||"N\xe3o informado",sem_registro:v||"N\xe3o informado",mensagem:O||"",vaga_id:N?.id||null,vaga_titulo:N?.titulo||"Pesquisa Trabalhista R\xe1pida",vaga_empresa:N?.empresa||"",vaga_localizacao:N?.localizacao||"",fonte:I||"modal_pesquisa_trabalhista_rapida",status:"novo",contatado:!1,convertido:!1,data_criacao:y||new Date().toISOString(),created_at:new Date().toISOString()};console.log("\uD83D\uDCE4 Enviando dados completos para backend:",T);let w="https://worker-job-board-backend-leonardosilvas2.replit.app",j=`${w}/api/labor-research`;console.log("\uD83D\uDD17 ENDPOINT USADO:",j),console.log("\uD83C\uDF10 BACKEND URL:",w);let R=await fetch(j,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","User-Agent":"SiteDoTrabalhador-PesquisaTrabalhista"},body:JSON.stringify(T)}),k=await R.text();if(console.log("\uD83D\uDCE5 Resposta do backend:",k.substring(0,500)),!R.ok)throw Error(`Backend erro: ${R.status} - ${k}`);try{o=JSON.parse(k)}catch(e){throw console.error("❌ Erro ao parsear resposta JSON:",e),Error("Resposta inv\xe1lida do backend")}return console.log("✅ SUCESSO! Pesquisa trabalhista salva:",o),a.status(200).json({success:!0,message:"Pesquisa trabalhista enviada com sucesso! Entraremos em contato em breve.",data:o,timestamp:new Date().toISOString()})}catch(e){return console.error("❌ ERRO no envio da pesquisa trabalhista:",e),a.status(500).json({success:!1,message:"Erro interno do servidor ao processar pesquisa trabalhista",error:e.message,timestamp:new Date().toISOString()})}}let d=(0,i.M)(t,"default"),c=(0,i.M)(t,"config"),l=new r.PagesAPIRouteModule({definition:{kind:s.A.PAGES_API,page:"/api/submit-lead",pathname:"/api/submit-lead",bundlePath:"",filename:""},userland:t})},5600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6435:(e,a)=>{Object.defineProperty(a,"M",{enumerable:!0,get:function(){return function e(a,o){return o in a?a[o]:"then"in a&&"function"==typeof a.then?a.then(a=>e(a,o)):"function"==typeof a&&"default"===o?a:void 0}}})},8667:(e,a)=>{Object.defineProperty(a,"A",{enumerable:!0,get:function(){return o}});var o=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})}};var a=require("../../webpack-api-runtime.js");a.C(e);var o=a(a.s=5338);module.exports=o})();